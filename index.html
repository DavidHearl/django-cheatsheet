<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Django Setup & Deployment Guide</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>Django Setup & Deployment Guide</h1>

        <h2>1. Create the Django Project</h2>
        <ol>
            <li>Open VS Code and open the terminal (View > Terminal).</li>
            <li>Navigate to your desired directory:
                <ul>
                    <li>
                        <p class="description">Mac:</p>
                        <pre><code>cd '/Users/davidhearl/Documents/08 - Programming/GitHub'</code></pre>
                        
                    </li>
                </ul>
                
            </li>
            <li>Create a virtual environment:
                <pre><code>python -m venv virtual_environment</code></pre>
            </li>
            <li>Activate the virtual environment:
                <ul>
                    <li>
                        <p class="description">Windows:</p>
                        <pre><code>virtual_environment\Scripts\activate</code></pre>
                    </li>
                    <li>
                        <p class="description">macOS/Linux:</p>
                        <pre><code>source virtual_environment/bin/activate</code></pre>
                    </li>
                </ul>
            </li>
            <li>Install Django:
                <pre><code>pip install Django</code></pre>
                <pre><code>pip freeze > requirements.txt</code></pre>
            </li>
            <li>Create a new Django project:
                <pre><code>django-admin startproject myproject</code></pre>
            </li>
            <li>Navigate into your project:
                <pre><code>cd myproject</code></pre>
            </li>
            <li>Run the development server:
                <pre><code>python manage.py runserver</code></pre>
            </li>
        </ol>

        <h2>2. Link the Project to GitHub</h2>
        <ol>
            <li>Initialize a Git repository:
                <pre><code>git init</code></pre>
            </li>
            <li>Create a .gitignore file and add:
                <pre class="file-content"><code>virtual_environment/
__pycache__/
*.pyc
*.sqlite3</code></pre>
            </li>
            <li>Add all files:
                <pre><code>git add .</code></pre>
            </li>
            <li>Commit the initial version:
                <pre><code>git commit -m "Initial commit"</code></pre>
            </li>
            <li>Create a new repository on GitHub (do not add a README).</li>
            <li>Link your local repo:
                <pre><code>git remote add origin https://github.com/davidhearl/your-repo.git</code></pre>
            </li>
            <li>Push to GitHub:
                <pre><code>git branch -M main</code></pre>
                <pre><code>git push -u origin main</code></pre>
            </li>
        </ol>

        <h2>3. Common Django Settings to Change</h2>
        <p>Edit <code class="file-path">myproject/settings.py</code>:</p>
        <ul>
            <li>Turn off debug in production:
                <pre class="file-content"><code>DEBUG = False</code></pre>
            </li>
            <li>Set allowed hosts:
                <pre class="file-content"><code>ALLOWED_HOSTS = ['yourdomain.com', 'localhost']</code></pre>
            </li>
            <li>Adjust timezone and language:
                <pre class="file-content"><code>TIME_ZONE = 'Europe/Dublin'
LANGUAGE_CODE = 'en-us'</code></pre>
            </li>
            <li>Add your app to <code>INSTALLED_APPS</code>:
                <pre class="file-content"><code>INSTALLED_APPS = [
    ...
    'myapp',
]</code></pre>
            </li>
            <li>Use environment variable for secret key:
                <pre class="file-content"><code>import os
SECRET_KEY = os.getenv('SECRET_KEY')</code></pre>
            </li>
        </ul>

        <h2>4. Commit the Changes</h2>
        <pre><code>git add .</code></pre>
        <pre><code>git commit -m "Updated settings and added app"</code></pre>
        <pre><code>git push</code></pre>

        <h2>5. Create a Django App</h2>
        <ol>
            <li>Create the app:
                <pre><code>python manage.py startapp myapp</code></pre>
            </li>
            <li>Add 'myapp' to <code>INSTALLED_APPS</code> in <code>settings.py</code>.</li>
            <li>Define your models in <code>myapp/models.py</code>.</li>
            <li>Run migrations:
                <pre><code>python manage.py makemigrations
python manage.py migrate</code></pre>
            </li>
            <li>Create a superuser:
                <pre><code>python manage.py createsuperuser</code></pre>
            </li>
        </ol>

        <h2>Common Django Commands</h2>
        <pre><code>python manage.py runserver
python manage.py makemigrations
python manage.py migrate
python manage.py startapp appname
python manage.py createsuperuser
python manage.py shell
python manage.py collectstatic
python manage.py check</code></pre>

        <h2>Deploying a Django Application on Debian</h2>

        <h3>1. System Update and Dependencies</h3>
        <pre><code>sudo apt update && sudo apt upgrade -y
sudo apt install python3 python3-pip python3-venv git curl build-essential libpq-dev -y</code></pre>

        <h3>2. Create a Dedicated User (Optional)</h3>
        <pre><code>sudo adduser django
sudo usermod -aG sudo django
su - django</code></pre>

        <h3>3. Clone Your Django Project</h3>
        <pre><code>git clone https://github.com/yourusername/yourproject.git
cd yourproject</code></pre>

        <h3>4. Set Up Python Virtual Environment</h3>
        <pre><code>python3 -m venv venv
source venv/bin/activate
pip install --upgrade pip
pip install -r requirements.txt</code></pre>

        <h3>5. Configure Django for Production</h3>
        <ul>
            <li>Set <code>DEBUG = False</code></li>
            <li>Set <code>ALLOWED_HOSTS</code> to match your server</li>
            <li>Use a secure <code>SECRET_KEY</code></li>
        </ul>
        <pre><code>python manage.py collectstatic
python manage.py migrate</code></pre>

        <h3>6. Create Gunicorn Systemd Service</h3>
        <pre><code>[Unit]
Description=gunicorn daemon for Django project
After=network.target

[Service]
User=django
Group=www-data
WorkingDirectory=/home/django/yourproject
ExecStart=/home/django/yourproject/venv/bin/gunicorn --workers 3 --bind unix:/home/django/yourproject/gunicorn.sock yourproject.wsgi:application

[Install]
WantedBy=multi-user.target</code></pre>
        <pre><code>sudo systemctl start gunicorn
sudo systemctl enable gunicorn</code></pre>

        <h3>7. Install and Configure Nginx</h3>
        <pre><code>sudo apt install nginx -y</code></pre>
        <pre><code>server {
    listen 80;
    server_name your.server.ip.or.domain;

    location = /favicon.ico { access_log off; log_not_found off; }
    location /static/ {
        root /home/django/yourproject;
    }

    location / {
        include proxy_params;
        proxy_pass http://unix:/home/django/yourproject/gunicorn.sock;
    }
}</code></pre>
        <pre><code>sudo ln -s /etc/nginx/sites-available/yourproject /etc/nginx/sites-enabled
sudo nginx -t
sudo systemctl restart nginx</code></pre>

        <h3>8. Adjust Firewall (If Needed)</h3>
        <pre><code>sudo ufw allow 'Nginx Full'</code></pre>

        <h3>9. Set Up HTTPS with Certbot (Optional)</h3>
        <pre><code>sudo apt install certbot python3-certbot-nginx -y
sudo certbot --nginx -d yourdomain.com</code></pre>

        <h3>10. Final Checks</h3>
        <ul>
            <li>Visit your IP or domain</li>
            <li>Ensure static files, admin panel, and views load</li>
            <li>Check logs:
                <pre><code>sudo journalctl -u gunicorn
sudo journalctl -xe</code></pre>
            </li>
        </ul>
    </div>

    <button id="backToTop" onclick="scrollToTop()">Back to Top</button>
    <script src="script.js"></script>
</body>
</html>
